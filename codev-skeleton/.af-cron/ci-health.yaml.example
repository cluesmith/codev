# Example: CI Health Check
#
# Checks for recent CI failures every 30 minutes and notifies the architect.
# Copy this file without the .example extension to activate it.
#
# See: https://github.com/cluesmith/codev/blob/main/codev/specs/399-af-cron.md

name: CI Health Check
schedule: "*/30 * * * *"
enabled: true
command: gh run list --limit 5 --json status,conclusion --jq '[.[] | select(.conclusion == "failure")] | length'
condition: "output != '0'"
message: "CI Alert: ${output} recent failures. Run `gh run list --limit 5` to investigate."
target: architect
timeout: 30
